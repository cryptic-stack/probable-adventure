{% block header %}
{% endblock %}

<form method="POST" action="{{ script_root }}/admin/challenges/new" enctype="multipart/form-data">
	{% block name %}
	<div class="form-group">
		<label>
			Name:<br>
			<small class="form-text text-muted">
				The name of your challenge
			</small>
		</label>
		<input type="text" class="form-control" name="name" placeholder="Enter challenge name">
	</div>
	{% endblock %}

	{% block category %}
	<div class="form-group">
		<label>
			Category:<br>
			<small class="form-text text-muted">
				The category of your challenge
			</small>
		</label>
		<input type="text" class="form-control" name="category" placeholder="Enter challenge category">
	</div>
	{% endblock %}


	{% block message %}
	<div class="form-group">
		<label>
			Message:<br>
			<small class="form-text text-muted">
				Use this to give a brief introduction to your challenge.
			</small>
		</label>
		<textarea id="new-desc-editor" class="form-control markdown" name="description" rows="10"></textarea>
	</div>
	{% endblock %}

	{% block attribution %}
	{% endblock %}

	{% block connection_info %}
	<div class="form-group">
		<label>
			Connection Info<br>
			<small class="form-text text-muted">
				Raw connection metadata. This is auto-generated by the access builder below.
			</small>
		</label>
		<input type="text" class="form-control chal-connection-info" name="connection_info" placeholder="Optional plain text, URL, or generated access JSON">
	</div>

	<div class="form-group">
		<label>
			Player Access Builder<br>
			<small class="form-text text-muted">
				Configure player access for terminal or RDP challenges.
			</small>
		</label>
		<div class="border rounded p-3">
			<div class="form-group">
				<label>Access Type</label>
				<select class="form-control custom-select chal-access-type">
					<option value="">None</option>
					<option value="terminal">Browser Terminal</option>
					<option value="rdp">Browser RDP</option>
					<option value="ssh">SSH</option>
					<option value="url">Custom URL</option>
					<option value="plain">Plain Instructions</option>
				</select>
			</div>
			<div class="form-group">
				<label>Access URL</label>
				<input type="text" class="form-control chal-access-url" placeholder="https://...">
			</div>
			<div class="form-row">
				<div class="form-group col-md-8">
					<label>Host</label>
					<input type="text" class="form-control chal-access-host" placeholder="challenge.example.com">
				</div>
				<div class="form-group col-md-4">
					<label>Port</label>
					<input type="number" class="form-control chal-access-port" placeholder="22">
				</div>
			</div>
			<div class="form-row">
				<div class="form-group col-md-6">
					<label>Username</label>
					<input type="text" class="form-control chal-access-username" placeholder="player">
				</div>
				<div class="form-group col-md-6">
					<label>Password / Token</label>
					<input type="text" class="form-control chal-access-password" placeholder="Optional">
				</div>
			</div>
			<div class="form-group mb-0">
				<label>Instructions</label>
				<textarea class="form-control chal-access-instructions" rows="3" placeholder="Optional instructions shown to players"></textarea>
			</div>
		</div>
	</div>
	{% endblock %}

	{% block value %}
	<div class="form-group">
		<label>
			Value:<br>
			<small class="form-text text-muted">
				This is how many points are rewarded for solving this challenge.
			</small>
		</label>
		<input type="number" class="form-control" name="value" placeholder="Enter value" required>
	</div>
	{% endblock %}

	{% block state %}
	<input type="hidden" name="state" value="hidden">
	{% endblock %}

	{% block type %}
	<input type="hidden" name="type" value="standard">
	{% endblock %}

	{% block submit %}
	<div class="form-group">
		<button class="btn btn-primary float-right create-challenge-submit" type="submit">Create</button>
	</div>
	{% endblock %}
</form>

{% block footer %}
{% endblock %}
